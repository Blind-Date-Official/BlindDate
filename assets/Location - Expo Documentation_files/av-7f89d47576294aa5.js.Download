(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40724],{33832:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/versions/v46.0.0/sdk/av",function(){return c(67121)}])},25374:function(f,d,a){"use strict";a.d(d,{F:function(){return o}});var g=a(26042),h=a(69396),i=a(35944),c=a(70917),b=a(4903);a(67294);var j=a(26084),k=a(18722),l=(0,c.iv)("line-height:1.8rem;margin-top:1.4rem;margin-bottom:1.4rem;color:",b.theme.text.default,";"),m=(0,c.iv)("font-family:",b.typography.fontFaces.medium,";font-weight:400;text-decoration:none;color:",b.theme.link.default,";:hover{text-decoration:underline;}"),n=(0,c.iv)("text-decoration:none;color:",b.theme.link.default,";:hover{text-decoration:underline;}"),e=function(a){var b,c=a.packageName,d=a.hideBareInstructions,e=a.cmd,h=void 0===e?["$ expo install ".concat(c)]:e,f=a.href,o=void 0===f?(b=c,"https://github.com/expo/expo/tree/main/packages/".concat(b.split(" ")[0])):f,g=(0,j.y)().sourceCodeUrl;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(k.o,{cmd:h}),void 0!==d&&d?null:(0,i.BX)("p",{css:l,children:["If you're installing this in a"," ",(0,i.tZ)("a",{css:n,href:"/introduction/managed-vs-bare/#bare-workflow",children:"bare React Native app"}),", you should also follow"," ",(0,i.tZ)("a",{css:m,href:null!=g?g:o,children:"these additional installation instructions"}),"."]})]})};d.Z=e;var o=function(b){var a,c=(0,j.y)().packageName;return(0,i.tZ)(e,(0,h.Z)((0,g.Z)({},b),{packageName:null!==(a=b.packageName)&& void 0!==a?a:c}))}},18722:function(e,d,c){"use strict";c.d(d,{o:function(){return A}});var f=c(35944),b=c(70917),a=c(4903),g=c(67294),h=function(a){var d=a.children,e=a.style,c=a.includeMargin;return(0,f.tZ)("div",{css:[i,(void 0===c||c)&&j,(0,b.iv)(e)],children:d})},i=(0,b.iv)({display:"flex",flexDirection:"column"}),j=(0,b.iv)({marginBottom:a.spacing[4]}),k=function(a){var d=a.children,b=a.alwaysDark,c=a.hideOverflow;return(0,f.tZ)("div",{css:[l,void 0!==b&&b&&m,void 0!==c&&c&&n],children:d})},l=(0,b.iv)("background-color:",a.theme.palette.black,";border:1px solid ",a.theme.border.default,";border-bottom-left-radius:",a.borderRadius.medium,"px;border-bottom-right-radius:",a.borderRadius.medium,"px;padding:",a.spacing[4],"px;overflow-x:auto;code{padding-left:0;padding-right:0;}"),m=(0,b.iv)("border-color:transparent;white-space:nowrap;"),n=(0,b.iv)("overflow:hidden;code{white-space:nowrap;}"),o=c(69036),p=function(b){var g=b.title,c=b.children,d=b.alwaysDark,e=void 0!==d&&d;return(0,f.BX)("div",{css:[q,e&&r],children:[(0,f.tZ)(o.GP,{css:[s,e&&{color:a.darkTheme.text.default}],children:g}),!!c&&(0,f.tZ)("div",{css:t,children:c})]})},q=(0,b.iv)("background-color:",a.theme.background.default,";border:1px solid ",a.theme.border.default,";border-bottom:none;border-top-left-radius:",a.borderRadius.medium,"px;border-top-right-radius:",a.borderRadius.medium,"px;display:flex;padding:0 8px 0 16px;justify-content:space-between;min-height:42px;"),r=(0,b.iv)("background-color:",a.darkTheme.background.tertiary,";border-color:transparent;"),s=(0,b.iv)("line-height:42px !important;user-select:none;"),t=(0,b.iv)("display:flex;justify-content:flex-end;align-items:center;"),u=c(26042),v=c(69396),w=c(99534),x=c(48192),y=function(b){var h=b.children,c=b.icon,d=b.alwaysDark,e=void 0!==d&&d,i=(0,w.Z)(b,["children","icon","alwaysDark"]),j={color:e?a.darkTheme.text.default:void 0,size:a.iconSize.small},k=c&&g.cloneElement(c,j);return(0,f.tZ)(x.z,(0,v.Z)((0,u.Z)({size:"mini",theme:"transparent",icon:k},i),{children:(0,f.tZ)(o.u5,{css:e&&{color:a.darkTheme.text.default},children:h})}))},z=function(b){var h=b.text,e=(0,w.Z)(b,["text"]),c=(0,g.useState)(!1),d=c[0],i=c[1];return(0,f.tZ)(y,(0,v.Z)((0,u.Z)({icon:(0,f.tZ)(a.ClipboardIcon,{}),onClick:function(){var a;null===(a=navigator.clipboard)|| void 0===a||a.writeText(h),i(!0),setTimeout(function(){return i(!1)},1500)},disabled:d},e),{children:d?"Copied!":"Copy"}))},A=function(a){var b=a.cmd,e=a.cmdCopy,g=a.hideOverflow,c=a.includeMargin,d=a.title;return(0,f.BX)(h,{style:D,includeMargin:void 0===c||c,children:[(0,f.tZ)(p,{alwaysDark:!0,title:void 0===d?"Terminal":d,children:B({cmd:b,cmdCopy:e})}),(0,f.tZ)(k,{alwaysDark:!0,hideOverflow:g,children:b.map(C)})]})};function B(a){var c=a.cmd,d=a.cmdCopy,b=d||function(b){var a=b.filter(function(a){return!a.startsWith("#")&&""!==a});if(1===a.length)return a[0].startsWith("$")?a[0].slice(2):a[0]}(c);return b&&(0,f.tZ)(z,{alwaysDark:!0,text:b})}function C(b,d){var c="line-".concat(d);return""===b.trim()?(0,f.tZ)("br",{css:E},c):b.startsWith("#")?(0,f.tZ)(o.cO,{css:[F,E,{color:a.darkTheme.code.comment}],children:b},c):b.startsWith("$")?(0,f.BX)("div",{children:[(0,f.tZ)(o.cO,{css:[F,E,{display:"inline",color:a.darkTheme.text.secondary},],children:"\u2192\xa0"}),(0,f.tZ)(o.cO,{css:F,children:b.substring(1).trim()})]},c):(0,f.tZ)(o.cO,{css:[F,{display:"inherit"}],children:b},c)}var D=(0,b.iv)("li &{margin-top:",a.spacing[4],"px;display:flex;}"),E=(0,b.iv)("user-select:none;"),F=(0,b.iv)("display:inline-block;line-height:130%;background-color:transparent;border:none;color:",a.darkTheme.text.default,";")},67121:function(f,b,a){"use strict";a.r(b),a.d(b,{default:function(){return e},headings:function(){return d},meta:function(){return c}});var g=a(99534);a(67294);var h=a(3905),i=a(25374),j=a(41765),k=a(28045),c={title:"AV",sourceCodeUrl:"https://github.com/expo/expo/tree/sdk-46/packages/expo-av",packageName:"expo-av"},d=[{depth:2,type:"text",title:"Installation"},{depth:2,type:"text",title:"Usage"},{depth:3,type:"inlineCode",title:"Example:  Audio.Sound"},{depth:3,type:"inlineCode",title:"Example:  Video"},{depth:3,type:"inlineCode",title:"Example:  setOnPlaybackStatusUpdate()"},{depth:3,type:"text",title:"Example: Loop media exactly 20 times"},{depth:2,type:"linkReference",title:"What is seek tolerance and why would I want to use it  "},{depth:2,type:"text",title:"API"}],l={meta:c,headings:d};function e(a){var b=a.components,c=(0,g.Z)(a,["components"]);return(0,h.kt)("wrapper",Object.assign({},l,c,{components:b,mdxType:"MDXLayout"}),(0,h.kt)("p",null,"The ",(0,h.kt)("a",Object.assign({parentName:"p"},{href:"/versions/v46.0.0/sdk/audio/"}),(0,h.kt)("inlineCode",{parentName:"a"},"Audio.Sound"))," objects and ",(0,h.kt)("a",Object.assign({parentName:"p"},{href:"/versions/v46.0.0/sdk/video/"}),(0,h.kt)("inlineCode",{parentName:"a"},"Video"))," components share a unified imperative API for media playback."),(0,h.kt)("p",null,"Note that for ",(0,h.kt)("inlineCode",{parentName:"p"},"Video"),", all of these operations are also available via props on the component, but we recommend using this imperative playback API for most applications where finer control over the state of the video playback is needed."),(0,h.kt)("p",null,"Try the ",(0,h.kt)("a",Object.assign({parentName:"p"},{href:"http://expo.dev/@community/playlist"}),"playlist example app")," (source code is ",(0,h.kt)("a",Object.assign({parentName:"p"},{href:"https://github.com/expo/playlist-example"}),"on GitHub"),") to see an example usage of the playback API for both ",(0,h.kt)("inlineCode",{parentName:"p"},"Audio.Sound")," and ",(0,h.kt)("inlineCode",{parentName:"p"},"Video"),"."),(0,h.kt)(k.Z,{android:!0,emulator:!0,ios:!0,simulator:!0,web:!0,mdxType:"PlatformsSection"}),(0,h.kt)("h2",Object.assign({},{id:"installation"}),"Installation"),(0,h.kt)(i.F,{mdxType:"APIInstallSection"}),(0,h.kt)("h2",Object.assign({},{id:"usage"}),"Usage"),(0,h.kt)("p",null,"In this page, we reference operations on ",(0,h.kt)("inlineCode",{parentName:"p"},"playbackObject"),"s. Here is an example of obtaining access to the reference for both sound and video:"),(0,h.kt)("h3",Object.assign({},{id:"example-audiosound"}),"Example: ",(0,h.kt)("inlineCode",{parentName:"h3"},"Audio.Sound")),(0,h.kt)("pre",null,(0,h.kt)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"await Audio.setAudioModeAsync({ playsInSilentModeIOS: true });\n  \nconst playbackObject = new Audio.Sound();\n// OR\nconst { sound: playbackObject } = await Audio.Sound.createAsync(\n  { uri: 'http://foo/bar.mp3' },\n  { shouldPlay: true }\n);\n...\n")),(0,h.kt)("p",null,"See the ",(0,h.kt)("a",Object.assign({parentName:"p"},{href:"/versions/v46.0.0/sdk/audio/"}),"audio documentation")," for further information on ",(0,h.kt)("inlineCode",{parentName:"p"},"Audio.Sound.createAsync()"),"."),(0,h.kt)("h3",Object.assign({},{id:"example-video"}),"Example: ",(0,h.kt)("inlineCode",{parentName:"h3"},"Video")),(0,h.kt)("pre",null,(0,h.kt)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"...\n_handleVideoRef = component => {\n  const playbackObject = component;\n  ...\n}\n\n...\n\nrender() {\n  return (\n    ...\n      <Video\n        ref={this._handleVideoRef}\n        ...\n      />\n    ...\n  )\n}\n...\n")),(0,h.kt)("p",null,"See the ",(0,h.kt)("a",Object.assign({parentName:"p"},{href:"/versions/v46.0.0/sdk/video/"}),"video documentation")," for further information."),(0,h.kt)("h3",Object.assign({},{id:"example-setonplaybackstatusupdate"}),"Example: ",(0,h.kt)("inlineCode",{parentName:"h3"},"setOnPlaybackStatusUpdate()")),(0,h.kt)("pre",null,(0,h.kt)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"_onPlaybackStatusUpdate = playbackStatus => {\n  if (!playbackStatus.isLoaded) {\n    // Update your UI for the unloaded state\n    if (playbackStatus.error) {\n      console.log(`Encountered a fatal error during playback: ${playbackStatus.error}`);\n      // Send Expo team the error on Slack or the forums so we can help you debug!\n    }\n  } else {\n    // Update your UI for the loaded state\n\n    if (playbackStatus.isPlaying) {\n      // Update your UI for the playing state\n    } else {\n      // Update your UI for the paused state\n    }\n\n    if (playbackStatus.isBuffering) {\n      // Update your UI for the buffering state\n    }\n\n    if (playbackStatus.didJustFinish && !playbackStatus.isLooping) {\n      // The player has just finished playing and will stop. Maybe you want to play something else?\n    }\n\n    ... // etc\n  }\n};\n\n... // Load the playbackObject and obtain the reference.\nplaybackObject.setOnPlaybackStatusUpdate(this._onPlaybackStatusUpdate);\n...\n")),(0,h.kt)("h3",Object.assign({},{id:"example-loop-media-exactly-20-times"}),"Example: Loop media exactly 20 times"),(0,h.kt)("pre",null,(0,h.kt)("code",Object.assign({parentName:"pre"},{className:"language-javascript"}),"const N = 20;\n...\n\n_onPlaybackStatusUpdate = (playbackStatus) => {\n  if (playbackStatus.didJustFinish) {\n    if (this.state.numberOfLoops == N - 1) {\n      playbackObject.setIsLooping(false);\n    }\n    this.setState({ numberOfLoops: this.state.numberOfLoops + 1 });\n  }\n};\n\n...\nthis.setState({ numberOfLoops: 0 });\n... // Load the playbackObject and obtain the reference.\nplaybackObject.setOnPlaybackStatusUpdate(this._onPlaybackStatusUpdate);\nplaybackObject.setIsLooping(true);\n...\n")),(0,h.kt)("h2",Object.assign({},{id:"what-is-seek-tolerance-and-why-would-i-want-to-use-it-ios-only"}),"What is seek tolerance and why would I want to use it ","[iOS only]"),(0,h.kt)("p",null,"When asked to seek an A/V item, native player in iOS sometimes may seek to a slightly different time. This technique, mentioned in ",(0,h.kt)("a",Object.assign({parentName:"p"},{href:"https://developer.apple.com/documentation/avfoundation/avplayer/1387741-seek#discussion"}),"Apple documentation"),", is used to shorten the time of the ",(0,h.kt)("inlineCode",{parentName:"p"},"seekTo")," call (the player may decide to play immediately from a different time than requested, instead of decoding the exact requested part and playing it with the decoding delay)."),(0,h.kt)("p",null,"If precision is important, you can specify the tolerance with which the player will seek. However, this will result in an increased delay."),(0,h.kt)("h2",Object.assign({},{id:"api"}),"API"),(0,h.kt)("pre",null,(0,h.kt)("code",Object.assign({parentName:"pre"},{className:"language-js"}),"import { Audio, Video } from 'expo-av';\n")),(0,h.kt)(j.Z,{packageName:"expo-av",apiName:"AV",mdxType:"APISection"}))}e.isMDXComponent=!0}},function(a){a.O(0,[43611,49774,92888,40179],function(){var b;return a(a.s=33832)}),_N_E=a.O()}])