(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40493],{22572:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/versions/latest/sdk/location",function(){return c(78064)}])},79475:function(c,a,b){"use strict";b.d(a,{Y:function(){return d},Z:function(){return e}});var d="https://snack.expo.dev";function e(a){var c=a.templateId,d=a.code,e=a.files,f=a.baseURL,b={};return e&&Object.keys(e).forEach(function(a){var c=e[a];/\.(jsx?|tsx?|json|md)$/i.test(a)?b[a]={type:"CODE",url:c.match(/^https?:\/\//)?c:"".concat(f,"/").concat(c)}:b[a]={type:"ASSET",contents:c}}),c?b["App.js"]={type:"CODE",url:"".concat(f,"/").concat(c,".js")}:d&&(b["App.js"]={type:"CODE",contents:d}),b}},25374:function(f,d,a){"use strict";a.d(d,{F:function(){return o}});var g=a(26042),h=a(69396),i=a(35944),c=a(70917),b=a(4903);a(67294);var j=a(26084),k=a(18722),l=(0,c.iv)("line-height:1.8rem;margin-top:1.4rem;margin-bottom:1.4rem;color:",b.theme.text.default,";"),m=(0,c.iv)("font-family:",b.typography.fontFaces.medium,";font-weight:400;text-decoration:none;color:",b.theme.link.default,";:hover{text-decoration:underline;}"),n=(0,c.iv)("text-decoration:none;color:",b.theme.link.default,";:hover{text-decoration:underline;}"),e=function(a){var b,c=a.packageName,d=a.hideBareInstructions,e=a.cmd,h=void 0===e?["$ expo install ".concat(c)]:e,f=a.href,o=void 0===f?(b=c,"https://github.com/expo/expo/tree/main/packages/".concat(b.split(" ")[0])):f,g=(0,j.y)().sourceCodeUrl;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(k.o,{cmd:h}),void 0!==d&&d?null:(0,i.BX)("p",{css:l,children:["If you're installing this in a"," ",(0,i.tZ)("a",{css:n,href:"/introduction/managed-vs-bare/#bare-workflow",children:"bare React Native app"}),", you should also follow"," ",(0,i.tZ)("a",{css:m,href:null!=g?g:o,children:"these additional installation instructions"}),"."]})]})};d.Z=e;var o=function(b){var a,c=(0,j.y)().packageName;return(0,i.tZ)(e,(0,h.Z)((0,g.Z)({},b),{packageName:null!==(a=b.packageName)&& void 0!==a?a:c}))}},67394:function(f,c,a){"use strict";a.d(c,{Z:function(){return b}});var g=a(51438),h=a(88029),i=a(29815),j=a(82337),k=a(35944),l=a(4903),d=a(67294),m=a(79475),e=a(72093),n=a(48192),o="v".concat(a(4147).i8),b=function(c){(0,h.Z)(a,c);var e=(0,j.Z)(a);function a(){var b;return(0,g.Z)(this,a),b=e.apply(this,arguments),b.contentRef=d.createRef(),b.state={ready:!1},b.getSelectedDocsVersion=function(){var a=b.context.version;return"latest"===a?o:a},b.getSnackSdkVersion=function(){var a=b.getSelectedDocsVersion();return"unversioned"===a&&(a=o),a.replace("v","")},b.getExamplesPath=function(){return"".concat(document.location.origin,"/static/examples/").concat(b.getSelectedDocsVersion())},b.getDependencies=function(){return(0,i.Z)(b.props.dependencies).join(",")},b.getCode=function(){return(b.contentRef.current&&b.contentRef.current.textContent||"").replace(/%%placeholder-start%%.*%%placeholder-end%%/g,"")},b}var b=a.prototype;return b.componentDidMount=function(){this.setState({ready:!0})},b.render=function(){return(0,k.BX)("div",{style:{marginBottom:l.spacing[4]},children:[(0,k.tZ)("div",{ref:this.contentRef,style:this.props.contentHidden?{display:"none"}:void 0,children:this.props.children}),(0,k.BX)("form",{action:m.Y,method:"POST",target:"_blank",children:[(0,k.tZ)("input",{type:"hidden",name:"platform",value:this.props.defaultPlatform||"android"}),(0,k.tZ)("input",{type:"hidden",name:"name",value:this.props.label||"Example"}),(0,k.tZ)("input",{type:"hidden",name:"dependencies",value:this.getDependencies()}),(0,k.tZ)("input",{type:"hidden",name:"sdkVersion",value:this.getSnackSdkVersion()}),this.props.platforms&&(0,k.tZ)("input",{type:"hidden",name:"supportedPlatforms",value:this.props.platforms.join(",")}),this.state.ready&&(0,k.tZ)("input",{type:"hidden",name:"files",value:JSON.stringify((0,m.Z)({templateId:this.props.templateId,code:this.getCode(),files:this.props.files,baseURL:this.getExamplesPath()}))}),(0,k.tZ)(n.z,{disabled:!this.state.ready,iconRight:(0,k.tZ)(l.ArrowUpRightIcon,{color:l.theme.palette.white}),type:"submit",children:this.props.buttonTitle||"Try this example on Snack"})]})]})},a}(d.Component);b.contextType=e.m$,b.defaultProps={dependencies:[]}},18722:function(e,d,c){"use strict";c.d(d,{o:function(){return A}});var f=c(35944),b=c(70917),a=c(4903),g=c(67294),h=function(a){var d=a.children,e=a.style,c=a.includeMargin;return(0,f.tZ)("div",{css:[i,(void 0===c||c)&&j,(0,b.iv)(e)],children:d})},i=(0,b.iv)({display:"flex",flexDirection:"column"}),j=(0,b.iv)({marginBottom:a.spacing[4]}),k=function(a){var d=a.children,b=a.alwaysDark,c=a.hideOverflow;return(0,f.tZ)("div",{css:[l,void 0!==b&&b&&m,void 0!==c&&c&&n],children:d})},l=(0,b.iv)("background-color:",a.theme.palette.black,";border:1px solid ",a.theme.border.default,";border-bottom-left-radius:",a.borderRadius.medium,"px;border-bottom-right-radius:",a.borderRadius.medium,"px;padding:",a.spacing[4],"px;overflow-x:auto;code{padding-left:0;padding-right:0;}"),m=(0,b.iv)("border-color:transparent;white-space:nowrap;"),n=(0,b.iv)("overflow:hidden;code{white-space:nowrap;}"),o=c(69036),p=function(b){var g=b.title,c=b.children,d=b.alwaysDark,e=void 0!==d&&d;return(0,f.BX)("div",{css:[q,e&&r],children:[(0,f.tZ)(o.GP,{css:[s,e&&{color:a.darkTheme.text.default}],children:g}),!!c&&(0,f.tZ)("div",{css:t,children:c})]})},q=(0,b.iv)("background-color:",a.theme.background.default,";border:1px solid ",a.theme.border.default,";border-bottom:none;border-top-left-radius:",a.borderRadius.medium,"px;border-top-right-radius:",a.borderRadius.medium,"px;display:flex;padding:0 8px 0 16px;justify-content:space-between;min-height:42px;"),r=(0,b.iv)("background-color:",a.darkTheme.background.tertiary,";border-color:transparent;"),s=(0,b.iv)("line-height:42px !important;user-select:none;"),t=(0,b.iv)("display:flex;justify-content:flex-end;align-items:center;"),u=c(26042),v=c(69396),w=c(99534),x=c(48192),y=function(b){var h=b.children,c=b.icon,d=b.alwaysDark,e=void 0!==d&&d,i=(0,w.Z)(b,["children","icon","alwaysDark"]),j={color:e?a.darkTheme.text.default:void 0,size:a.iconSize.small},k=c&&g.cloneElement(c,j);return(0,f.tZ)(x.z,(0,v.Z)((0,u.Z)({size:"mini",theme:"transparent",icon:k},i),{children:(0,f.tZ)(o.u5,{css:e&&{color:a.darkTheme.text.default},children:h})}))},z=function(b){var h=b.text,e=(0,w.Z)(b,["text"]),c=(0,g.useState)(!1),d=c[0],i=c[1];return(0,f.tZ)(y,(0,v.Z)((0,u.Z)({icon:(0,f.tZ)(a.ClipboardIcon,{}),onClick:function(){var a;null===(a=navigator.clipboard)|| void 0===a||a.writeText(h),i(!0),setTimeout(function(){return i(!1)},1500)},disabled:d},e),{children:d?"Copied!":"Copy"}))},A=function(a){var b=a.cmd,e=a.cmdCopy,g=a.hideOverflow,c=a.includeMargin,d=a.title;return(0,f.BX)(h,{style:D,includeMargin:void 0===c||c,children:[(0,f.tZ)(p,{alwaysDark:!0,title:void 0===d?"Terminal":d,children:B({cmd:b,cmdCopy:e})}),(0,f.tZ)(k,{alwaysDark:!0,hideOverflow:g,children:b.map(C)})]})};function B(a){var c=a.cmd,d=a.cmdCopy,b=d||function(b){var a=b.filter(function(a){return!a.startsWith("#")&&""!==a});if(1===a.length)return a[0].startsWith("$")?a[0].slice(2):a[0]}(c);return b&&(0,f.tZ)(z,{alwaysDark:!0,text:b})}function C(b,d){var c="line-".concat(d);return""===b.trim()?(0,f.tZ)("br",{css:E},c):b.startsWith("#")?(0,f.tZ)(o.cO,{css:[F,E,{color:a.darkTheme.code.comment}],children:b},c):b.startsWith("$")?(0,f.BX)("div",{children:[(0,f.tZ)(o.cO,{css:[F,E,{display:"inline",color:a.darkTheme.text.secondary},],children:"\u2192\xa0"}),(0,f.tZ)(o.cO,{css:F,children:b.substring(1).trim()})]},c):(0,f.tZ)(o.cO,{css:[F,{display:"inherit"}],children:b},c)}var D=(0,b.iv)("li &{margin-top:",a.spacing[4],"px;display:flex;}"),E=(0,b.iv)("user-select:none;"),F=(0,b.iv)("display:inline-block;line-height:130%;background-color:transparent;border:none;color:",a.darkTheme.text.default,";")},78064:function(f,b,a){"use strict";a.r(b),a.d(b,{default:function(){return e},headings:function(){return d},meta:function(){return c}});var g=a(99534);a(67294);var h=a(3905),i=a(41765),j=a(25374),k=a(28045),l=a(67394),c={title:"Location",sourceCodeUrl:"https://github.com/expo/expo/tree/sdk-46/packages/expo-location",packageName:"expo-location"},d=[{depth:2,type:"text",title:"Installation"},{depth:2,type:"text",title:"Configuration"},{depth:3,type:"text",title:"Android permissions"},{depth:3,type:"text",title:"Background Location Methods"},{depth:3,type:"text",title:"Geofencing Methods"},{depth:2,type:"text",title:"Usage"},{depth:2,type:"text",title:"Enabling Emulator Location"},{depth:3,type:"text",title:"iOS Simulator"},{depth:3,type:"text",title:"Android Emulator"},{depth:2,type:"text",title:"API"}],m={meta:c,headings:d};function e(a){var b=a.components,c=(0,g.Z)(a,["components"]);return(0,h.kt)("wrapper",Object.assign({},m,c,{components:b,mdxType:"MDXLayout"}),(0,h.kt)("p",null,(0,h.kt)("strong",{parentName:"p"},(0,h.kt)("inlineCode",{parentName:"strong"},"expo-location"))," allows reading geolocation information from the device. Your app can poll for the current location or subscribe to location update events."),(0,h.kt)(k.Z,{android:!0,emulator:!0,ios:!0,simulator:!0,web:!0,mdxType:"PlatformsSection"}),(0,h.kt)("h2",Object.assign({},{id:"installation"}),"Installation"),(0,h.kt)(j.F,{mdxType:"APIInstallSection"}),(0,h.kt)("h2",Object.assign({},{id:"configuration"}),"Configuration"),(0,h.kt)("h3",Object.assign({},{id:"android-permissions"}),"Android permissions"),(0,h.kt)("ul",null,(0,h.kt)("li",{parentName:"ul"},"This module requires the permissions for approximate and exact device location. It also needs the foreground service permission to subscribe to location updates, while the app is in use. The ",(0,h.kt)("inlineCode",{parentName:"li"},"android.permission.ACCESS_COARSE_LOCATION"),", ",(0,h.kt)("inlineCode",{parentName:"li"},"ACCESS_FINE_LOCATION"),", and ",(0,h.kt)("inlineCode",{parentName:"li"},"FOREGROUND_SERVICE")," permissions are automatically added."),(0,h.kt)("li",{parentName:"ul"},"In order to use background location features, you also must add the ",(0,h.kt)("inlineCode",{parentName:"li"},"android.permission.ACCESS_BACKGROUND_LOCATION")," and ",(0,h.kt)("a",Object.assign({parentName:"li"},{href:"https://support.google.com/googleplay/android-developer/answer/9799150?hl=en"}),"submit your app for review and request access to use the background location permission"),".")),(0,h.kt)("h3",Object.assign({},{id:"background-location-methods"}),"Background Location Methods"),(0,h.kt)("p",null,"In order to use Background Location methods, the following requirements apply:"),(0,h.kt)("ul",null,(0,h.kt)("li",{parentName:"ul"},"Location permissions must be granted. On iOS it must be granted with ",(0,h.kt)("inlineCode",{parentName:"li"},"Always")," option."),(0,h.kt)("li",{parentName:"ul"},(0,h.kt)("strong",{parentName:"li"},"(",(0,h.kt)("em",{parentName:"strong"},"iOS only"),")")," ",(0,h.kt)("inlineCode",{parentName:"li"},'"location"')," background mode must be specified in ",(0,h.kt)("strong",{parentName:"li"},"Info.plist")," file. See ",(0,h.kt)("a",Object.assign({parentName:"li"},{href:"/versions/latest/sdk/task-manager/#configuration"}),"background tasks configuration guide"),". "),(0,h.kt)("li",{parentName:"ul"},"Background location task must be defined in the top-level scope, using ",(0,h.kt)("a",Object.assign({parentName:"li"},{href:"/versions/latest/sdk/task-manager/#taskmanagerdefinetasktaskname-task"}),"TaskManager.defineTask"),".")),(0,h.kt)("h3",Object.assign({},{id:"geofencing-methods"}),"Geofencing Methods"),(0,h.kt)("p",null,"In order to use Geofencing methods, the following requirements apply:"),(0,h.kt)("ul",null,(0,h.kt)("li",{parentName:"ul"},"Location permissions must be granted. On iOS it must be granted with ",(0,h.kt)("inlineCode",{parentName:"li"},"Always")," option."),(0,h.kt)("li",{parentName:"ul"},"The Geofencing task must be defined in the top-level scope, using ",(0,h.kt)("a",Object.assign({parentName:"li"},{href:"/versions/latest/sdk/task-manager/#taskmanagerdefinetasktaskname-task"}),"TaskManager.defineTask"),"."),(0,h.kt)("li",{parentName:"ul"},"On iOS, there is a ",(0,h.kt)("a",Object.assign({parentName:"li"},{href:"https://developer.apple.com/documentation/corelocation/monitoring_the_user_s_proximity_to_geographic_regions"}),"limit of 20")," ",(0,h.kt)("inlineCode",{parentName:"li"},"regions")," that can be simultaneously monitored.")),(0,h.kt)("h2",Object.assign({},{id:"usage"}),"Usage"),(0,h.kt)("p",null,"If you're using the iOS or Android Emulators, ensure that ",(0,h.kt)("a",Object.assign({parentName:"p"},{href:"/versions/latest/sdk/location/#enabling-emulator-location"}),"Location is enabled"),"."),(0,h.kt)(l.Z,{label:"Location",dependencies:["expo-location","expo-constants"],mdxType:"SnackInline"},(0,h.kt)("pre",null,(0,h.kt)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),"import React, { useState, useEffect } from 'react';\nimport { Platform, Text, View, StyleSheet } from 'react-native';\n/* @hide */\nimport Device from 'expo-device';\n/* @end */\nimport * as Location from 'expo-location';\n\nexport default function App() {\n  const [location, setLocation] = useState(null);\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      /* @hide */\n      if (Platform.OS === 'android' && !Device.isDevice) {\n        setErrorMsg(\n          'Oops, this will not work on Snack in an Android Emulator. Try it on your device!'\n        );\n        return;\n      }\n      /* @end */\n      let { status } = await Location.requestForegroundPermissionsAsync();\n      if (status !== 'granted') {\n        setErrorMsg('Permission to access location was denied');\n        return;\n      }\n\n      let location = await Location.getCurrentPositionAsync({});\n      setLocation(location);\n    })();\n  }, []);\n\n  let text = 'Waiting..';\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (location) {\n    text = JSON.stringify(location);\n  }\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.paragraph}>{text}</Text>\n    </View>\n  );\n}\n\n/* @hide const styles = StyleSheet.create({ ... }); */\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 20,\n  },\n  paragraph: {\n    fontSize: 18,\n    textAlign: 'center',\n  },\n});\n/* @end */\n"))),(0,h.kt)("h2",Object.assign({},{id:"enabling-emulator-location"}),"Enabling Emulator Location"),(0,h.kt)("h3",Object.assign({},{id:"ios-simulator"}),"iOS Simulator"),(0,h.kt)("p",null,'With Simulator open, go to Debug > Location and choose any option besides "None" (obviously).'),(0,h.kt)("p",null,(0,h.kt)("img",Object.assign({parentName:"p"},{src:"/static/images/ios-simulator-location.png",alt:"iOS Simulator location"}))),(0,h.kt)("h3",Object.assign({},{id:"android-emulator"}),"Android Emulator"),(0,h.kt)("p",null,'Open Android Studio, and launch your AVD in the emulator. Then, on the options bar for your device, click the icon for "More" and navigate to the "Location" tab.'),(0,h.kt)("p",null,(0,h.kt)("img",Object.assign({parentName:"p"},{src:"/static/images/android-emulator-location.png",alt:"Android Simulator location"}))),(0,h.kt)("p",null,'If you don\'t receive the locations in the emulator, you may have to turn off "Improve Location Accuracy" in Settings - Location in the emulator. This will turn off Wi-Fi location and only use GPS. Then you can manipulate the location with GPS data through the emulator.'),(0,h.kt)("h2",Object.assign({},{id:"api"}),"API"),(0,h.kt)("pre",null,(0,h.kt)("code",Object.assign({parentName:"pre"},{className:"language-js"}),"import * as Location from 'expo-location';\n")),(0,h.kt)(i.Z,{packageName:"expo-location",apiName:"Location",mdxType:"APISection"}))}e.isMDXComponent=!0}},function(a){a.O(0,[43611,49774,92888,40179],function(){var b;return a(a.s=22572)}),_N_E=a.O()}])